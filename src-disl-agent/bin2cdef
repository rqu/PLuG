#!/bin/bash
cat <<- EOT
/**
 * DO NOT EDIT!
 *
 * This file was generated using the bin2cdef script.
 */
#include <jvmti.h>
EOT

while [ $# -gt 1 ]; do
	FILE=$1; shift
	NAME=$1; shift
	
	cat << EOT


jvmtiClassDefinition ${NAME}_classdef = {
	.class_byte_count = $(ls -l ${FILE} | awk '{print $5}'),
	.class_bytes = (unsigned char *)
$(hexdump -e '"\t\t" "Q" 16/1 "xxx%02x" "Q" "\n"' ${FILE} |sed 's/xxx  //g; y/Q/"/; s/xxx/\\x/g'),
};
EOT
done
